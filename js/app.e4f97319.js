(function(t){function e(e){for(var a,o,r=e[0],l=e[1],c=e[2],p=0,d=[];p<r.length;p++)o=r[p],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],a=!0,r=1;r<i.length;r++){var l=i[r];0!==n[l]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=i[0]))}return t}var a={},n={app:0},s=[];function o(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=a,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(i,a,function(e){return t[e]}.bind(null,a));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/omdb-search/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0333":function(t,e,i){},"0fa2":function(t,e,i){},"23a8":function(t,e,i){"use strict";i("ee7d")},"4a1b":function(t,e,i){"use strict";i("8267")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"main-content"},[i("div",{staticClass:"container"},[i("section",{staticClass:"mb-6"},[i("SearchForm",{attrs:{s:t.query.s,type:t.query.type,y:t.query.y,page:t.query.page},on:{"update:s":function(e){return t.$set(t.query,"s",e)},"update:type":function(e){return t.$set(t.query,"type",e)},"update:y":function(e){return t.$set(t.query,"y",e)},"update:page":function(e){return t.$set(t.query,"page",e)},resetPage:t.resetPage,getSearchMovieList:t.getSearchMovieList}})],1),i("section",{staticClass:"mb-6"},[i("MovieTable",{attrs:{"movie-list":t.movieList,"table-prompt":t.tablePrompt,"is-loading":t.isLoading},on:{"get-movie-content":t.getMovieContent}})],1),i("div",{staticClass:"mb-6"},[i("Pagination",{attrs:{current:t.pagination.current,total:t.pagination.total,itemsPerPage:t.pagination.itemsPerPage,step:t.pagination.step,onChange:t.onChange}})],1),i("div",[i("Modal",{ref:"modal",attrs:{movieCount:t.movieCount,isModalLoading:t.isModalLoading}})],1)])])])},s=[],o=(i("a9e3"),i("e40d"),i("9b01")),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search-form"},[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v("Movie Title")]),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.movieTitle,expression:"movieTitle"}],staticClass:"input",class:[{"is-danger":t.errorPrompt}],attrs:{errorPrompt:"",type:"text",placeholder:""},domProps:{value:t.movieTitle},on:{change:function(e){return t.$emit("update:s",e.target.value)},keydown:function(e){return e.type.indexOf("key")||13===e.keyCode?t.searchSubmit():null},input:function(e){e.target.composing||(t.movieTitle=e.target.value)}}})]),i("p",{directives:[{name:"show",rawName:"v-show",value:t.errorPrompt,expression:"errorPrompt"}],staticClass:"help is-danger"},[t._v("Movie Title is required")])]),i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-half"},[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v("Type")]),i("div",{staticClass:"control"},[i("div",{staticClass:"select"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.movieType,expression:"movieType"}],on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.movieType=e.target.multiple?i:i[0]},function(e){return t.$emit("update:type",e.target.value)}]}},[i("option",{attrs:{value:""}},[t._v("Select Type")]),i("option",{attrs:{value:"movie"}},[t._v("movie")]),i("option",{attrs:{value:"series"}},[t._v("series")]),i("option",{attrs:{value:"episode"}},[t._v("episode")])])])])])]),i("div",{staticClass:"column is-half"},[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v("Year")]),i("div",{staticClass:"control"},[i("div",{staticClass:"select"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.movieYear,expression:"movieYear"}],on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.movieYear=e.target.multiple?i:i[0]},function(e){return t.$emit("update:y",e.target.value)}]}},[i("option",{attrs:{value:""}},[t._v("Select Year")]),t._l(t.yearList,(function(e){return i("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)])])])])]),i("div",{staticClass:"field"},[i("div",{staticClass:"control"},[i("button",{staticClass:"button is-info",on:{click:function(e){return t.searchSubmit()}}},[t._v("Search")])])])])},l=[],c=(i("498a"),{name:"SearchForm",props:{s:{type:String,default:""},type:{type:String,default:""},y:{type:String,default:""},page:{type:Number,default:1}},data:function(){return{errorPrompt:!1,yearList:[],movieTitle:this.s,movieType:this.type,movieYear:this.y}},methods:{searchSubmit:function(){this.checkEmptyText()||(1!==this.page&&this.$emit("resetPage"),this.$emit("getSearchMovieList"))},checkEmptyText:function(){return""===this.movieTitle.trim()?(this.errorPrompt=!0,!0):(this.errorPrompt=!1,!1)}},created:function(){this.yearList=o}}),u=c,p=(i("bb4d"),i("2877")),d=Object(p["a"])(u,r,l,!1,null,"4ef86a6c",null),v=d.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"table-container"},[i("table",{staticClass:"table is-bordered is-striped movie-table"},[i("loading",{attrs:{active:t.isLoading,"is-full-page":!1},on:{"update:active":function(e){t.isLoading=e}}}),t._m(0),i("tbody",[i("tr",{directives:[{name:"show",rawName:"v-show",value:0===t.movieList.length,expression:"movieList.length === 0"}]},[i("td",{staticClass:"empty-data",attrs:{colspan:"4"}},[t._v(t._s(t.tablePrompt))])]),t._l(t.movieList,(function(e){return i("tr",{key:e.imdbID},[i("th",[t._v(t._s(e.Title))]),i("td",[t._v(t._s(e.Type))]),i("td",[t._v(t._s(e.Year))]),i("td",[i("button",{staticClass:"button is-info is-small",on:{click:function(i){return t.getDetail(e.imdbID)}}},[t._v("詳細資料")])])])}))],2)],1)])},f=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",{staticClass:"movie-table-title"},[t._v("名稱")]),i("th",[t._v("類型")]),i("th",{staticClass:"movie-table-year"},[t._v("年份")]),i("th")])])}],h=i("9062"),g=i.n(h),b={name:"MovieTable",components:{Loading:g.a},props:{movieList:{type:Array,default:function(){return[]}},tablePrompt:{type:String,default:""},isLoading:{type:Boolean,default:!1}},methods:{getDetail:function(t){this.$emit("get-movie-content",t)}}},y=b,C=(i("23a8"),Object(p["a"])(y,m,f,!1,null,"386cbd2a",null)),_=C.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"pagination"}},[i("nav",{staticClass:"pagination is-centered"},[t.current>1?i("a",{staticClass:"pagination-previous",on:{click:function(e){return t.onChange(t.current-1)}}},[t._v("<")]):t._e(),t.size>1&&t.current<t.size?i("a",{staticClass:"pagination-next",on:{click:function(e){return t.onChange(t.current+1)}}},[t._v(" >")]):t._e(),i("ul",{staticClass:"pagination-list"},t._l(t.elements,(function(e){return i(e.type,{key:e.page,tag:"component",attrs:{page:e.page,current:t.current,onChange:t.onChange}})})),1)])])},M=[],L=(i("d3b7"),i("159b"),i("b64b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",[i("a",{class:["pagination-link",{"is-info":t.current===t.page}],on:{click:function(e){return t.onChange(t.page)}}},[t._v(" "+t._s(t.page)+" ")])])}),k=[],O={name:"page",props:["page","current","onChange"]},T=O,x=(i("ac81"),Object(p["a"])(T,L,k,!1,null,"67f97e5a",null)),w=x.exports,S=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},$=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",[i("span",{staticClass:"pagination-ellipsis"},[t._v("…")])])}],j={name:"ellipse-break",props:["page","current","onChange"]},E=j,q=Object(p["a"])(E,S,$,!1,null,null,null),N=q.exports,z={name:"pagination",components:{Page:w,EllipseBreak:N},props:{current:{type:Number},total:{type:Number,default:0},itemsPerPage:{type:Number},step:{type:Number,default:3},onChange:{type:Function}},data:function(){return{elements:[],size:0}},mounted:function(){var t=this;this.paginate(),Object.keys(this._props).forEach((function(e){t.$watch(e,(function(e,i){t.paginate()}))}))},methods:{add:function(t,e){for(var i=t;i<e;i++)this.elements.push({type:"page",page:i})},first:function(){this.elements.push({type:"page",page:1},{type:"ellipse-break"})},last:function(){this.elements.push({type:"ellipse-break"},{type:"page",page:this.size})},paginate:function(){this.elements=[],this.size=Math.ceil(this.total/this.itemsPerPage),this.size<2*this.step+6?this.add(1,this.size+1):this.current<2*this.step+1?(this.add(1,2*this.step+4),this.last()):this.current>this.size-2*this.step?(this.first(),this.add(this.size-2*this.step-2,this.size+1)):(this.first(),this.add(this.current-this.step,this.current+this.step+1),this.last())}}},Y=z,A=Object(p["a"])(Y,P,M,!1,null,null,null),D=A.exports,F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("transition",{attrs:{name:"fade"}},[t.isOpenModal?i("div",{staticClass:"modal is-active"},[i("div",{staticClass:"modal-background",on:{click:function(e){t.isOpenModal=!1}}}),i("div",{staticClass:"modal-card"},[i("loading",{attrs:{active:t.isModalLoading,"is-full-page":!1},on:{"update:active":function(e){t.isModalLoading=e}}}),i("header",{staticClass:"modal-card-head"},[i("p",{staticClass:"modal-card-title"},[t._v(t._s(t.movieCount.title))]),i("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){t.isOpenModal=!1}}})]),i("section",{staticClass:"modal-card-body"},[i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-3"},[i("figure",{staticClass:"image is-fullwidth"},[i("img",{staticClass:"movie-image",attrs:{src:t.movieCount.poster}})])]),i("div",{staticClass:"column is-9"},[i("ul",{staticClass:"movie-content-list"},[i("li",[i("strong",[t._v("Actors:")]),t._v(" "+t._s(t.movieCount.actors))]),i("li",[i("strong",[t._v("Genre:")]),t._v(" "+t._s(t.movieCount.genre))]),i("li",[i("strong",[t._v("Plot:")]),i("br"),t._v(t._s(t.movieCount.plot))])])])])]),i("footer",{staticClass:"modal-card-foot is-justify-content-flex-end"},[i("button",{staticClass:"button is-dark",on:{click:function(e){t.isOpenModal=!1}}},[t._v("Cancel")]),i("button",{staticClass:"button is-info",on:{click:function(e){t.isOpenModal=!1}}},[t._v("OK")])])],1)]):t._e()])],1)},B=[],J={name:"Modal",components:{Loading:g.a},props:{movieCount:{type:Object,default:function(){return{title:"",genre:"",actors:"",plot:"",poster:""}}},isModalLoading:{type:Boolean,default:!1}},data:function(){return{isOpenModal:!1}},methods:{getDetail:function(t){this.$emit("get-movie-content",t)},openModal:function(){this.isOpenModal=!0}}},G=J,I=(i("4a1b"),Object(p["a"])(G,F,B,!1,null,"6aae36ef",null)),R=I.exports,K="https://www.omdbapi.com/",H={name:"App",components:{SearchForm:v,MovieTable:_,Pagination:D,Modal:R},data:function(){return{movieList:[],tablePrompt:"No data",isLoading:!1,pagination:{current:1,total:0,itemsPerPage:10,step:1},query:{apikey:"2edf5c13",s:"",type:"",y:"",page:1},openModal:!1,isModalLoading:!1,movieCount:{title:"",genre:"",actors:"",plot:"",poster:""}}},methods:{getSearchMovieList:function(){var t=this;this.isLoading=!0;var e=this.query;this.axios.get(K,{params:e}).then((function(e){if("False"===e.data.Response)return t.movieList=[],t.pagination.total=0,t.tablePrompt=e.data.Error,void setTimeout((function(){t.isLoading=!1}),500);var i=Number(e.data.totalResults);t.pagination.total=i,t.movieList=e.data.Search,setTimeout((function(){t.isLoading=!1}),500)}))},getMovieContent:function(t){var e=this;this.isModalLoading=!0,this.$refs.modal.openModal();var i={apikey:"2edf5c13",i:t};this.axios.get(K,{params:i}).then((function(t){var i=t.data,a=i.Title,n=i.Genre,s=i.Actors,o=i.Plot,r=i.Poster;e.movieCount.title=a,e.movieCount.genre=n,e.movieCount.actors=s,e.movieCount.plot=o,e.movieCount.poster=r,setTimeout((function(){e.isModalLoading=!1}),500)}))},resetPage:function(){this.pagination.current=1,this.query.page=1},onChange:function(t){this.query.page=t,this.pagination.current=t,this.getSearchMovieList()}},created:function(){this.yearList=o}},Q=H,U=(i("5c0b"),Object(p["a"])(Q,n,s,!1,null,null,null)),V=U.exports,W=i("bc3a"),X=i.n(W),Z=i("130e");i("92c6");a["a"].use(Z["a"],X.a),a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(V)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";i("9c0c")},8267:function(t,e,i){},"9b01":function(t){t.exports=JSON.parse("[2022,2021,2020,2019,2018,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,1977,1976,1975,1974,1973,1972,1971,1970,1969,1968,1967,1966,1965,1964,1963,1962,1961,1960,1959,1958,1957,1956,1955,1954,1953,1952,1951,1950,1949,1948,1947,1946,1945,1944,1943,1942,1941,1940,1939,1938,1937,1936,1935,1934,1933,1932,1931,1930,1929,1928,1927,1926,1925,1924,1923,1922,1921,1920,1919,1918,1917,1916,1915,1914,1913,1912,1911,1910,1909,1908,1907,1906,1905,1904,1903,1902,1901,1900,1899,1898,1897,1896,1895,1894,1893,1892,1891,1890,1889,1888,1887,1886,1885]")},"9c0c":function(t,e,i){},ac81:function(t,e,i){"use strict";i("0333")},bb4d:function(t,e,i){"use strict";i("0fa2")},ee7d:function(t,e,i){}});
//# sourceMappingURL=app.e4f97319.js.map